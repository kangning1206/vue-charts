{"version":3,"sources":["webpack:///./src/views/d3/Chess.vue?46dc","webpack:///./src/exportSvg.js","webpack:///src/views/d3/Chess.vue","webpack:///./src/views/d3/Chess.vue?473b","webpack:///./src/views/d3/Chess.vue?6c4a","webpack:///./src/views/d3/Chess.vue?9eb0"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","href","on","click","download","_v","staticRenderFns","exportSvg","node","name","serializer","XMLSerializer","source","concat","serializeToString","image","Image","src","encodeURIComponent","canvas","document","createElement","width","clientWidth","height","clientHeight","context","getContext","onload","drawImage","a","toDataURL","cells","dataset","i","h","Math","floor","l","push","x","y","start","d3","xdata","ydata","cellWidth","color","svg","select","append","attr","g","gborder","forEach","d","text","selectAll","data","enter","Chessvue_type_script_lang_js_","methods","getElementById","mounted","$d3","d3_Chessvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chess_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Chess_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-c2a547d4.ea65abd2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"chart\"}},[_c('a',{attrs:{\"href\":\"\"},on:{\"click\":_vm.download}},[_vm._v(\"下载为png图片\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n/**\n * [exportSvg 将svg保存为png图片]\n * 思路：（svg => canvas => png）\n把svg作为dataurl放在image\n创建一个canvas来显示image\n利用canvas.toDataURL存为图片\n创建a标签出发浏览器下载\n * @param  {[type]} node [description]\n * @param  {[type]} name [description]\n * @return {[type]}      [description]\n */\nexport default function exportSvg(node, name) {\n  // node 是 svg dom,document.getElementById()\n  const serializer = new XMLSerializer();\n  const source = `<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n${serializer.serializeToString(node)}`;\n  const image = new Image();\n  image.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(source)}`;\n  const canvas = document.createElement('canvas');\n  canvas.width = node.clientWidth;\n  canvas.height = node.clientHeight;\n  const context = canvas.getContext('2d');\n  // context.fillStyle = '#fff'; // #fff设置保存后的PNG 是白色的\n  // context.fillRect(0, 0, 10000, 10000);\n  image.onload = function () {\n    context.drawImage(image, 0, 0);\n    const a = document.createElement('a');\n    a.download = `${name}.png`;\n    a.href = canvas.toDataURL('image/png');\n    a.click();\n  };\n}\n","<template>\n  <div>\n    <div id=\"chart\">\n      <a href='' @click=\"download\">下载为png图片</a>\n    </div>\n  </div>\n</template>\n<script type=\"text/javascript\">\n\nimport exportSvg from '@/exportSvg';\n\n/**\n * [cells 棋盘格子数据]\n * @return {[type]} [description]\n */\nfunction cells() {\n  const dataset = [];\n  for (let i = 0; i < 64; i += 1) {\n    const h = Math.floor(i / 8);\n    const l = i % 8;\n    dataset.push({ x: h, y: l });\n  }\n  return dataset;\n}\n\nfunction start(d3) {\n  const width = 1000;\n  const height = 1000;\n\n  // 横向和纵向棋盘文字\n  const xdata = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\n  const ydata = [8, 7, 6, 5, 4, 3, 2, 1];\n  const dataset = cells();\n  // 格子正方形变长大小100\n  const cellWidth = 100;\n  // 颜色，白方、黑房\n  const color = ['#f0f0f0', '#333'];\n\n  const svg = d3\n    .select('#chart')\n    .append('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .attr('id', 'mysvg')\n    .attr('style', `background:${color[1]}`);\n\n\n  const g = svg.append('g').attr('transform', 'translate(100, 100)');\n\n  const gborder = svg.append('g');\n\n  gborder\n    .append('rect')\n    .attr('stroke-width', '2')\n    .attr('x', 98)\n    .attr('y', 98)\n    .attr('width', 804)\n    .attr('height', 804)\n    .attr('fill', 'none')\n    .attr('stroke', color[0])\n    .attr('stroke-width', 3);\n\n  // top\n  xdata.forEach((d, i) => {\n    gborder\n      .append('text')\n      .attr('x', () => i * 100 + 150)\n      .attr('y', 90)\n      .attr('fill', color[0])\n      .attr('transform', `rotate(180, ${i * 100 + 150} 85)`)\n      .text(() => d);\n  });\n\n  // bottom\n  xdata.forEach((d, i) => {\n    gborder\n      .append('text')\n      .attr('x', () => i * 100 + 150)\n      .attr('y', 920)\n      .attr('fill', color[0])\n      .text(() => d);\n  });\n\n  // left\n  ydata.forEach((d, i) => {\n    gborder\n      .append('text')\n      .attr('x', 80)\n      .attr('y', () => i * 100 + 150)\n      .attr('fill', color[0])\n      .text(() => d);\n  });\n\n  // right\n  ydata.forEach((d, i) => {\n    gborder\n      .append('text')\n      .attr('x', 910)\n      .attr('y', () => i * 100 + 150)\n      .attr('fill', color[0])\n      .attr('transform', `rotate(180, 915 ${i * 100 + 150})`)\n      .text(() => d);\n  });\n\n\n  g.selectAll('rect')\n    .data(dataset)\n    .enter()\n    .append('rect')\n    .attr('x', d => d.x * cellWidth)\n    .attr('y', d => d.y * cellWidth)\n    .attr('width', cellWidth)\n    .attr('height', cellWidth)\n    .attr('fill', (d, i) => {\n      if (Math.floor(i / 8) % 2 === 0) {\n        return i % 2 === 0 ? color[0] : color[1];\n      }\n      return i % 2 === 0 ? color[1] : color[0];\n    });\n}\n\nexport default {\n  name: 'Chess',\n  methods: {\n    download() {\n      exportSvg(document.getElementById('mysvg'), 'chess');\n    },\n  },\n  mounted() {\n    start(this.$d3);\n  },\n};\n</script>\n<style type=\"text/css\">\n#svg {\n  background: #fff;\n  border: solid 1px red;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chess.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chess.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chess.vue?vue&type=template&id=952b50f0&\"\nimport script from \"./Chess.vue?vue&type=script&lang=js&\"\nexport * from \"./Chess.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chess.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Chess.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chess.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chess.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}